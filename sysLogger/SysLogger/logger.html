<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title> Sun Microsystems </title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" href="/css/default.css" />
</head>
<!--stopindex-->

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff">
<a name="top"></a>

<!-- SUN.COM TEMPLATE V4.2 LEVEL 2 -->

<!-- BEGIN GLOBAL NAVIGATION TOOLBAR -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td><span class="sp2">&nbsp;</span></td></tr>
<form action="http://www.sun.com/search/index.cgi">
<tr><td width="100%" nowrap="nowrap"  valign="middle"><div class="sitelinks"> <a href="http://www.sun.com">sun.com</a>&nbsp;&nbsp;|&nbsp;&nbsp;1-800-123-4000 </div></td>
<td nowrap="nowrap" valign="middle"><div class="sitelinks"><a href="http://www.sun.com/howtobuy/">How To Buy</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="http://www.sun.com/MySun/">My Sun</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="http://www.sun.com/worldwide/">Worldwide Sites</a></div></td>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="middle"><input name="SYMBOL" type="text" class="medium" size="10" onFocus="if( this.value==this.defaultValue ) this.value='';" value="Search" /></td>
<td>&nbsp;&nbsp;</td>
<td valign="middle" align="left"><input type="submit" border="0" class="buttonred" value="&nbsp;&raquo;&nbsp;" onmouseover="this.style.color='#fbe249';" onmouseout="this.style.color='#FFF';" /></td>
<td><img src="/im/a.gif" width="10" height="1" border="0" alt="" /></td>
</tr></form>
<tr><td><span class="sp2">&nbsp;</span></td></tr>
</table>
<!-- END GLOBAL NAVIGATION TOOLBAR -->

<!-- BEGIN GENERIC MASTHEAD -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td><img src="/im/a.gif" width="10" height="1" border="0" alt="" /></td>
<td class="sunblue" valign="top"><a href="http://www.sun.com/"><img src="/im/logo_sun.gif" width="110" height="43" border="0" alt="Sun Microsystems Logo" /></a><br /><img src="/im/a.gif" width="170" height="1" alt="" /></td>
<td><img src="/im/a.gif" width="10" height="1" border="0" alt="" /></td>
<td width="50%" class="sunyellow" valign="bottom" nowrap="nowrap"><a href="/products/"><img src="/im/ar_lg_red_d_pad.gif" width="24" height="21" border="0" alt="" /></a><a href="http://www.sun.com/products/"><img src="/im/tx_lg_products_services.gif" width="146" height="21" border="0" alt="Products and Services" /></a><br /><span class="sp5">&nbsp;</span></td>
<td><img src="/im/a.gif" width="10" height="1" border="0" alt="" /></td>
<td width="50%" class="sunred" valign="bottom" nowrap="nowrap"><a href="/supportraining/"><img src="/im/ar_lg_yell_r_pad.gif" width="24" height="21" border="0" alt="" /></a><a href="http://www.sun.com/supportraining/"><img src="/im/tx_lg_support_training.gif" width="146" height="21" border="0" alt="Support and Training" /></a><br /><span class="sp5">&nbsp;</span></td>
<td><img src="/im/a.gif" width="10" height="1" border="0" alt="" /></td>
</tr>
</table>
<span class="sp5">&nbsp;</span><br />
<!-- END GENERIC MASTHEAD -->

<!-- BEGIN BREADCRUMB -->
<div class="breadcrumb">

<a href="http://www.sun.com">Home</a>&nbsp;&gt;
<a href="http://access1.sun.com">Access1.sun.com</a>&nbsp;&gt;
<a href="http://access1.sun.com/tools/tools.html">Tools</a
</div><br />
<!-- END BREADCRUMB -->
<P>
<!-- BEGIN PAGETITLE ONE LINE -->
<div class="pagetitle">ACCESS1.SUN.COM<BR>Tools</div>
<!-- END PAGETITLE ONE LINE -->

<!-- BEGIN WRAPPER TABLE, 2 COLUMN, LEFT/MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td valign="top">
<!-- BEGIN LEFT COLUMN COMPONENTS -->

<!-- BEGIN SUBNAVIGATION COMPONENT -->
<table border="0" cellpadding="8" cellspacing="0" width="100%" class="white1">
<tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%" class="vatop">
<tr>
<td colspan="2">
<div class="navtitle"><a href="http://access1.sun.com">Access1.sun.com</a></div>
</td>
</tr>

<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="http://access1.sun.com/#search">SEARCH Access1</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="/contactus">Contact Us</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="/codesamples/codesamples.html">Code Samples</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="/techarticles/techarticles.html">Technical Articles</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="/technotes/current.technotes.html">TechNotes</a></td>
</tr>

<tr>
<td><img src="/im/ic_curr_page.gif" width="13" height="14" border="0" alt="" /></td>
<td width="100%"><a href="/tools/tools.html">Tools</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="/tutorials/Swing_Tutorial/Dnd-Merlin-Tutorial/1.html">Tutorials</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="/FAQSets/faqsets.html">Sun Forum FAQ Sets</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="/SRDs/access1_srds.html">Support Readiness Documents</a></td>
</tr>

</table></td>
</tr>
</table>
<span class="sp10">&nbsp;</span><br />
<!-- END SUBNAVIGATION COMPONENT -->


<!-- BEGIN RELATED / SEE ALSO -->
<table border="0" cellpadding="8" cellspacing="0" width="100%" class="navblue">
<tr><td>

<table border="0" cellpadding="0" cellspacing="0" width="100%" class="vatop">
<tr><td colspan="2"><div class="navtitle">See Also:</div></td></tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="http://www.sun.com/developers/support/">Developer Support Services</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="http://forte.sun.com/ffj/index.html">Forte for Java</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="http://www.sun.com/forte/index.html">Forte Tools</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="http://developer.iplanet.com/">iPlanet</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="http://developer.java.sun.com/"">Java Developer Connection</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="http://soldc.sun.com">Solaris Developer Connection</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="http://sunsolve.sun.com">SunSolve Online</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="http://www.sun.com/developers/edu/">Training</a></td>
</tr>
<tr>
<td><span class="sp10">&nbsp;</span></td>
</tr>
<!-- ---
<tr><td colspan="2" class="white1"><span class="sp2">&nbsp;</span></td></tr>

<tr><td><span class="sp10">&nbsp;</span></td></tr>

<tr><td colspan="2"><div class="navtitle">See Also:</div></td></tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="{linkplaceholder}">See Also 1</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="{linkplaceholder}">See Also 2</a></td>
</tr>
<tr>
<td><span class="rightarrowblue">&raquo;</span>&nbsp;&nbsp;</td>
<td width="100%"><a href="{linkplaceholder}">See Also 3</a></td>
</tr>-->
</table></td></tr>
</table>
<span class="sp10">&nbsp;</span><br />
<!-- END RELATED / SEE ALSO -->

<!-- END LEFT COLUMN COMPONENTS -->
</td><td width="100%" valign="top">
<!-- BEGIN CENTER COLUMN COMPONENTS -->

<!--startindex-->

<!-- ============ -->
<!-- MAIN CONTENT -->
<!-- ============ -->

<h1>
Simple syslogd Message Logging Utility Classes</h1>

<B>by Rajesh Ramchandani</B>
<BR><I>(June, 2002)</I>
<P>
We want to hear from you!  Please send us your <A HREF="../SysLogger.feedback.html">feedback</A>.
<P>
The following tool may contain actual software programs in source 
code form. This source code is made available for developers to use as needed, 
pursuant to the terms and conditions of this <A HREF="../BSD.html">license</A>.
<P>
You can download this tool (SysLogger) and its corresponding files <A HREF="../SysLogger.tar">here</A>.
</P>
<p><br><b>Abstract</b>
<p>This document describes the simplest utility classes that can be used
in a distributed application environment to log debugging messages to a
syslog server. The document highlights the use of severity levels and logging
facilities that can be used in various error environments to assist debugging
of Java[tm] platform clients.
<p><b>Introduction</b>
<p>Almost all developers use trace methods to log information to local
log files for debugging purposes. Every individual developer may have his/her
own way of using the log files. Not only could the format of the log files 
vary, but also the level of information, severity of information, and origin
of the log files.&nbsp; Log files are
the best way to debug problems as debuggers may not always&nbsp; be available
or applicable.
<p>Problems arise when the application runs on embedded devices where there
is very limited local non-volatile storage space to store the log files,
and also when diskless devices (for example,&nbsp; network applicances)
or PCs are deployed in numbers ranging from hundreds to thousands.
Using network storage space or disk space on the server is a solution,
but writing log files across the network is bound to slow down the performance.
The message logging server, <b>syslogd,</b> helps in situations like these.
<p><b>syslogd</b> reads and forwards system messages to the&nbsp; appropriate
log files and/or users, depending upon the priority of a message and the
system facility from&nbsp; which&nbsp; it&nbsp; originates. A configuration
file controls where messages are forwarded. The syslogd server is a standard
implementation of the message logging server available on most operating environments.
<p><b>Logging facilities</b>
<p>Typically, messages logged to the <b>syslog</b> will have a message
header and a message body. The message header consists of a logging facility
indicator, a severity level indicator, and a tag string. It may optionally
contain timestamp, client IP address or in some cases the process id.
<p>Possible values of severity level include:
<p><b>&nbsp;&nbsp;&nbsp; LOG_EMERG</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A panic
condition.&nbsp; This is normally broadcast to&nbsp; all
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; users.
<p>&nbsp;&nbsp;&nbsp;&nbsp; <b>LOG_ALERT</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A condition
that should be corrected immediately, such
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; as a corrupted
system database.
<p>&nbsp;&nbsp;<b>&nbsp;&nbsp; LOG_CRIT</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Critical
conditions, such as hard device errors.
<p>&nbsp;&nbsp;&nbsp;&nbsp; <b>LOG_ERR</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Errors.
<p>&nbsp;<b>&nbsp;&nbsp; LOG_WARNING</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Warning
messages.
<p>&nbsp;&nbsp;&nbsp;&nbsp; <b>LOG_NOTICE</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Conditions
that are not error conditions, but that may
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; require
special handling.
<p>&nbsp;&nbsp;&nbsp;&nbsp; <b>LOG_INFO</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Informational
messages.
<p>&nbsp;&nbsp;&nbsp;&nbsp;<b> LOG_DEBUG</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Messages
that contain information normally of use only
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; when debugging
a program.
<p>The facility indicates the application or&nbsp; system&nbsp; component
generating the message.&nbsp; Possible facility values include:
<p>&nbsp;&nbsp;&nbsp;&nbsp; <b>LOG_USER</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Messages
generated by random user processes.&nbsp; This&nbsp; is
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; the default
facility identifier if none is specified.
<p>&nbsp;&nbsp;&nbsp;&nbsp; <b>LOG_MAIL</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The mail
component.
<p>&nbsp;&nbsp;&nbsp;<b>&nbsp; LOG_AUTH</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The authorization
failure (any authorization scheme used).
<p><font color="red">The utility classes can be modified to add any additional desired
facilities and severity levels to suit the appropriate application environment.
The SysLogger utility class source provided is an example of using the syslog
facility.</font>
<p><b>syslog SysLogger API</b>
<p>Here's the <a href="index.html">list of the methods</a> that syslog
SysLogger provides. This is Javadoc[tm] software documentation generated from the current
syslog SysLogger utility class code.
<p><b>Logging Mechanism</b>
<p>Here's the sample application code which uses syslog SysLogger API to log
exceptions it receives during Runtime to the syslog server.
<p>import SysLogger;
<br>import java.io.*;
<p>public class LogTest {
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static void main(String
args[]) {
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String msg = "";
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String filename="file.txt";
// This file doesn't exists to get an exception
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SysLogger l = new SysLogger();
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; l.setSysLogger("192.9.200.1");
//Choose the syslogd server
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; l.openLog("LogTest", "LOG_IP");
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Try to open a non-existing
file to get exception
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FileReader in = new FileReader(filename);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (FileNotFoundException
e) {
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
msg = e.getMessage();
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
l.sysLog("LOG_ALERT",&nbsp; msg);&nbsp; //Catch exception if syslog cannot
write message
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch&nbsp;&nbsp;&nbsp;
(IOException e) {
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
System.out.println("Exception is " + e.getMessage());
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; l.closeLog(); //close the
log hence
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
<br>}
<p><b>setSysLogger()</b> : call setSysLogger() method to choose the syslogd server
that will be used for logging. The application developer may choose to close
the current logger or syslog server and choose another syslog server to
log messages. This gives enough flexibility to the application developer
to send different messages to different servers in distributed application
environments.
<p><b>openLog() :</b> The application should open the SysLogger by calling openLog()
on the SysLogger object. If log is not opened, it throws <i>LogNotOpenedException</i>
which should be handled by the application.&nbsp; SysLogger provides a method
called isOpened() to check if the log has been opened or not.
<p><b>sysLog() :&nbsp; </b>Messages to be logged are sent to the selected
syslog server using sysLog(). It specifies the severity levels for the
message along with the message.
<p>Syslog server will log these messages to the specified log files in
syslogd's configuration file (typically /etc/syslog.conf). Here's an example
of a log message from the above application: The syslog server was configured
to send messages to /var/adm/messages on a system running the Solaris[tm]
 Operating Environment.
<p>Feb 21 17:07:34 frsico LogTest:&nbsp; LOG_ALERT:&nbsp; file.txt (No
such file or directory)
<p>The message has LogTest tag prepended, the specified severity level
LOG_ALERT, timestamp, name of the operating system, and the actual message
"file not found (file.txt)". Source code for SysLogger is available
<a href="./source/SysLogger.java">here
</a>and
can be modified for custom use in various environments. Different facilities
and log severites can be implemented accordingly.
<p>Javadoc[tm] software documentation for the SysLogger utility class is available <a href="index.html">here</a>.
<P>
DOC ID #1133
<!-- =================== -->
<!-- END OF MAIN CONTENT -->
<!-- =================== -->

<!--stopindex-->

<!-- END CENTER COLUMN COMPONENTS -->
</td></tr>
<!-- BEGIN SPACER ROW -->
<tr><td><img src="/im/a.gif" width="170" height="1" border="0" alt="" /></td><td><img src="/im/a.gif" width="390" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->
</table>
<!-- END WRAPPER TABLE, 2 COLUMN, LEFT/MAIN -->

<!-- BEGIN GLOBAL FOOTER -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td class="grey1"><span class="sp5">&nbsp;</span></td></tr>
</table>

<div class="sitelinks" align="center">
<a href="http://www.sun.com/company/">Company Info</a>
&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="http://www.sun.com/contact/">Contact</a>
&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="http://www.sun.com/privacy/">Privacy</a>
&nbsp;&nbsp;|&nbsp;&nbsp;
Copyright 1994-2002 Sun Microsystems
<br />
&nbsp;
</div>
<!-- END GLOBAL FOOTER -->
</body>
</html>
