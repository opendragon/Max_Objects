\ProvidesFile{tcpServer.tex}[v1.1.5]
\startObject{\objNameS{tcpServer}}{tcpServer}
\index{Themes!TCP/IP!tcpServer}
\objPicture{tcpServersymbol.ps}
\objItemDescription{\objNameD{tcpServer} is an interface to the TCP/IP stack on a Macintosh,
providing an endpoint server to communicate with a single \objReference{tcpClient} object.}

\objItemCreated{August 1998}

\objItemVersion{1.1.5}

\objItemHelp{yes}

\objItemTheme{TCP/IP}

\objItemClass{Devices}

\objItemArgs{\ }

  \objListArgBegin
  \objListArgItem{port}{(optional) integer}{the number of the port to communicate on.
      The default port is 65535, which is also the maximum acceptable port number}
      
  \objListArgItem{buffers}{(optional) integer}{the number of receive buffers to use.
      The default number of buffers is 25}
      
  \objListArgEnd

\objItemInlet{\ }

  \objListIOBegin
  \objListIOItem{list}{the command input}
  \objListIOEnd

\objItemOutlet{\ }

  \objListIOBegin
  \objListIOItem{list}{the status or response.
      Status messages (triggered by a \objCmdQ{bang} or \objCmdQ{status} command) appear as a
      three- or four-element list, starting with the symbol `status'; response messages appear
      as a list, starting with the symbol `reply' and `self' messages appear as a two-element
      list, starting with the symbol `self'.}

  \objListIOItem{bang}{an error was detected}
  
  \objListIOEnd

\objItemCompanion{none}

\objItemStandalone{no, works with a \objName{tcpClient} object on the same computer or another
computer that is reachable via a TCP/IP network}

\objItemRetainsState{yes}

\objItemCompatibility{\MaxName{} 3.x and \MaxName{} 4.x \{OS 9 and OS X\}}

\objItemFat{PPC-only}

\objItemCommands[]

  \objListCmdBegin

  \objListCmdItem{\emph{bang}}{}
  Report the state of the communication (`unbound', `bound', `listening', `connecting', `connected',
  `disconnecting' or `unknown') as a three- or four-element list, with the symbol `status' as its
  first element.
  If the state is not `connected', the third element of the list is the port number that is being
  listened on.
  If the state is `connected', the third element is the IP address of the client, expressed as a
  symbol in `dotted' notation and the fourth element is the port number of the client.

  \objListCmdItem{disconnect}{}
  Close any existing connection to a \objName{tcpClient} object.

  \objListCmdItem{\emph{float}}{}
  Send the given floating point value to the \objName{tcpClient} object.

  \objListCmdItem{\emph{integer}}{}
  Send the given integer value to the \objName{tcpClient} object.

  \objListCmdItem{list}{anything}
  Send the given list to the \objName{tcpClient} object.

  \objListCmdItem{listen}{on\textnormal{/}off}
  Start listening on the communication port (`on') or stop listening (`off').
  The command is only accepted if the \objNameX{tcpServer} object is in an appropriate state---
  `listening' if `off' and `bound' if `on'.

  \objListCmdItem{port}{integer}
  Set the number of the port to communicate on.

  \objListCmdItem{self}{}
  Returns the IP address of this object as a two-element list, with the symbol `self' as its first
  element.
  
  \objListCmdItem{send}{anything}
  Send the arguments to the \objName{tcpClient} object.
  This message permits the transmission of an arbitrary list; in particular any list that could be
  confused with a command to the \objNameX{tcpServer} object.

  \objListCmdItem{status}{}
  Report the state of the communication (`unbound', `bound', `listening', `connecting', `connected',
  `disconnecting' or `unknown') as a two- or four-element list, with the symbol `status' as its
  first element.
  If the state is not `connected', the list will contain two elements.
  If the state is `connected', the third element is the IP address of the client, expressed as a
  symbol in `dotted' notation and the fourth element is the port of the client.

  \objListCmdItem{verbose}{\textnormal{[}on\textnormal{/}off\textnormal{]}}
  Communication tracing to the \MaxName{} window will be enabled (`on'), disabled (`off') or
  reversed, if no argument is given.
  
  \objListCmdEnd

\objItemFile

\objItemMessage[see \objName{tcpClient}]

\objItemComments[Once a communication path is established between a \objName{tcpClient} object and
a \objNameX{tcpServer} object, either object can send messages---the path is full-duplex.
Note as well that only there can only be one \objName{tcpMultiServer} or \objNameX{tcpServer} object
for any given port.
Figure~\objImageReference{diagram:tcpserverstate} is a state diagram for \objNameX{tcpServer} objects.]
\objDiagram{tcpServerstate.ps}{tcpserverstate}{State diagram for \objNameX{tcpServer} objects}

\objEnd{\objNameE{tcpServer}}
